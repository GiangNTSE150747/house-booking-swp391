<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html>
<html lang="eng">

<head>
<title>Thanh toán</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords"
	content="Downy Shoes Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<script type="application/x-javascript">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	






















































</script>
<!-- //custom-theme -->
<link href="${pageContext.request.contextPath}/view/web/css/blog.css"
	rel="stylesheet" type="text/css" media="all" />
<link href="${pageContext.request.contextPath}/view/web/css/rating.css"
	rel="stylesheet" type="text/css" media="all" />
<link
	href="${pageContext.request.contextPath}/view/web/css/bootstrap.css"
	rel="stylesheet" type="text/css" media="all" />
<link rel="stylesheet"
	href="${pageContext.request.contextPath}/view/web/css/shop.css"
	type="text/css" media="screen" property="" />
<link href="${pageContext.request.contextPath}/view/web/css/style7.css"
	rel="stylesheet" type="text/css" media="all" />
<link rel="stylesheet"
	href="${pageContext.request.contextPath}/view/web/css/flexslider.css"
	type="text/css" media="screen" />
<link
	href="${pageContext.request.contextPath}/view/web/css/easy-responsive-tabs.css"
	rel='stylesheet' type='text/css' />
<!-- Owl-carousel-CSS -->
<link rel="stylesheet" type="text/css"
	href="${pageContext.request.contextPath}/view/web/css/jquery-ui1.css">
<link href="${pageContext.request.contextPath}/view/web/css/style.css"
	rel="stylesheet" type="text/css" media="all" />
<!-- font-awesome-icons -->
<link
	href="${pageContext.request.contextPath}/view/web/css/font-awesome.css"
	rel="stylesheet">
<!-- //font-awesome-icons -->
<link
	href="//fonts.googleapis.com/css?family=Montserrat:100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800"
	rel="stylesheet">
<link
	href="//fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800"
	rel="stylesheet">

<!-- Plugin CKEDITOR -->
<script
	src="${pageContext.request.contextPath}/view/common/ckeditor/ckeditor.js"></script>

<style>
.recommend {
	background-color: #bfba55;
	border-radius: 100px;
	border: none;
	transition: all 0.4s ease-in-out;
	margin-top: 10px;
	margin-bottom: 10px;
	font-weight: bold;
	font-size: 20px;
}

#panel {
	border: 1px solid #EDF2F7;
	font-size: 14px;
	box-shadow: 0px 1px 1px rgb(0 0 0/ 5%);
	font-weight: normal;
	line-height: 17px;
	border-radius: 8px;
	margin-bottom: 16px;
	background-color: #ffffff;
	padding-top: 20px;
	padding-bottom: 20px;
}
/*
.a {
	color: #ffffff;
	height: 32px;
	margin: -1px -1px 0;
	display: flex;
	padding: 8px 12px;
	font-size: 16px;
	background: linear-gradient(90deg, #00B6F3 0%, #007FF3 100%);
	align-items: center;
	font-weight: 600;
	line-height: 19px;
	border-radius: 8px 8px 0px 0px;
}*/
.b {
	width: 100%;
	display: flex;
	padding: 0 24px;
	width: 100%;
	display: flex;
	padding: 0 24px;
}

.c {
	display: flex;
	flex-wrap: wrap;
	font-size: 18px;
	max-width: 643px;
	align-items: center;
	font-weight: 600;
	line-height: 21px;
	padding-bottom: 10px;
}

.d {
	display: flex;
	align-items: center;
	padding-right: 24px;
}

.jss2311 {
	border: 1px solid #EDF2F7;
	padding: 24px 24px 16px 24px;
	font-size: 14px;
	box-shadow: 0px 1px 1px rgb(0 0 0/ 5%);
	margin-top: 16px;
	line-height: 17px;
	border-radius: 8px;
	background-color: #fff;
}

.jss2321 {
	display: flex;
	font-size: 14px;
	align-items: center;
	line-height: 17px;
}

.jss2312 {
	padding: 12px 0 8px;
	font-weight: 600;
}

.jss2313 {
	display: flex;
	align-items: center;
	margin-left: -9px;
}

.jss760 {
	display: flex;
	text-align: center;
	align-items: center;
	flex-direction: column;
}

.jss5455 {
	margin: -3px;
	display: flex;
	flex-wrap: wrap;
}

.jss5456 {
	margin: 3px;
	padding: 5px 8px;
	font-size: 12px;
	font-weight: 400;
	line-height: 14px;
	border-radius: 100px;
	background-color: #EDF2F7;
}

.jss5457 {
	color: #00B6F3;
	width: fit-content;
	cursor: pointer;
	margin-top: 6px;
	background-color: rgba(0, 182, 243, 0.1);
}

.dropbtn {
	background-color: #fff;
	color: white;
	padding: 16px;
	font-size: 16px;
	border: none;
	cursor: pointer;
}

.dropdown {
	position: relative;
	display: inline-block;
}

.dropdown-content {
	display: none;
	position: absolute;
	right: 0;
	background-color: #f9f9f9;
	min-width: 160px;
	box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
	z-index: 1;
}

.dropdown-content a {
	color: black;
	padding: 12px 16px;
	text-decoration: none;
	display: block;
}

.dropdown-content a:hover {
	background-color: #f1f1f1;
}

.dropdown:hover .dropdown-content {
	display: block;
}

.dropdown:hover .dropbtn {
	background-color: #c8cbc8;
}

.discript span:nth-child(1), p:nth-child(1) {
	margin-top: 20px;
}

.tooltip {
	position: relative;
	display: inline-block;
	border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
	visibility: hidden;
	width: 120px;
	background-color: black;
	color: #fff;
	text-align: center;
	border-radius: 6px;
	padding: 5px 0;
	position: absolute;
	z-index: 1;
	bottom: 100%;
	left: 50%;
	margin-left: -60px;
	/* Fade in tooltip - takes 1 second to go from 0% to 100% opac: */
	opacity: 0;
	transition: opacity 1s;
}

.tooltip:hover .tooltiptext {
	visibility: visible;
	opacity: 1;
}

body {
	background-color: #EDF2F7;
}

.form-field {
	margin-bottom: 10px;
}
</style>

</head>

<body>
	<!-- banner -->
	<div class="banner_top innerpage" id="home">
		<div class="wrapper_top_w3layouts">
			<div class="header_agileits">
				<jsp:include page="header.jsp"></jsp:include>
			</div>
		</div>

		<jsp:include page="commontool.jsp"></jsp:include>

	</div>

	<div id="smallModel" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Thông báo</h4>
				</div>
				<div class="modal-body">
				<p>${sessionScope.checkout_message }</p>
					
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<a type="button" href="${pageContext.request.contextPath}/home" class="btn btn-success">Trở về trang chủ</a>
				</div>
			</div>

		</div>
	</div>
	<!-- end modal small -->

	<!-- Trigger the modal with a button -->
	<button type="button" style="display: none;" id="showMessage"
		class="showMess btn btn-info btn-lg" data-toggle="modal"
		data-target="#smallModel">Open Modal</button>

	<div style="width: 80%; margin-left: auto; margin-right: auto; margin-top: 30px;">
		<div class="col-md-7">
			<div id="panel" class="main col-md-12" style="margin-top: 20px;">
				<div class="b row">
					<div class="col-md-4">
						<div class="grid images_3_of_2">
							<div class="flexslider">
								<div class="thumb-image">
									<img style="border-radius: 5px;"
										src="${pageContext.request.contextPath}${building.buildingImage}"
										data-imagezoom="true" class="img-responsive">
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-8">
						<div class="c">${building.buildingName }</div>
						
						<div class="row" style="height: 75%;">
							<div class="col-md-12">
								<div>
									<p style="margin-top: 10px;">Địa chỉ:
										${building.buildingAddress }</p>
								</div>
								<div class="row" style="margin-top: 10px;">
									<jsp:useBean id="now" class="java.util.Date" />
									<fmt:formatDate var="year" value="${now}" pattern="yyyy-MM-dd" />
									<div class="col-md-12">Ngày đặt phòng: <b style="color: green;">${year}</b></div>
								</div>
								<div class="row" style="margin-top: 10px;">
									<div class="col-md-6">
										Ngày đến: <b>${startDate }</b>
									</div>
									<div class="col-md-6">
										Ngày về: <b>${endDate }</b>
									</div>
								</div>

							</div>

						</div>
					</div>

				</div>
			</div>

			<div id="panel" class="main col-md-12">
				<form action="check-out" method="get">
					<h2 class="form-field">Xác nhận thông tin</h2>
					<label for="name">Khách hàng</label> <input
						class="form-control form-field" type="text"
						placeholder="tên khách hàng" name="name" id="name"
						value="${usersession.user.name }" disabled="disabled"> <input
						class="form-control form-field" type="hidden"
						placeholder="tên khách hàng" name="name" id="name"
						value="${usersession.user.name }"> <label for="phone">Số
						điện thoại</label> <input class="form-control form-field" type="text"
						placeholder="tên khách hàng" name="phone" id="phone"
						value="${usersession.user.phoneNumber }" disabled="disabled">

					<label for="email">Email</label> <input
						class="form-control form-field" type="Email"
						placeholder="tên khách hàng" name="email" id="email"
						value="${usersession.user.email }" disabled="disabled"> <label
						for="note">Note</label>
					<textarea rows="5" cols="" name="note"
						class="form-control form-field"></textarea>
					<input id="approve" type="checkbox" required="required"
						class="form-field"> <label for="approve">Tôi đã
						đọc kỹ thông tin</label> <br>
					<div style="text-align: right;">
						<input type="hidden" name="action" value="approve"> <input
							type="hidden" name="buildingId" value="${building.buildingId }">
						<input type="hidden" name="roomId" value="${room.roomId }">
						<input type="hidden" name="startDate" value="${param.startDate }">
						<input type="hidden" name="endDate" value="${param.endDate }">
						<input type="hidden" name="price" value="${room.price }">

						<c:if test="${usersession != null}">
							<button type="submit" class="btn btn-primary">Xác nhận</button>
						</c:if>
						<c:if test="${	usersession == null}">
							<a href="${pageContext.request.contextPath}/login"
								class="btn btn-primary">Đăng nhập</a>
						</c:if>
					</div>

				</form>
			</div>
		</div>


		<div id="panel" class="main2 col-md-4"
			style="margin-top: 20px; margin-left: 20px;">
			<div style="margin-bottom: 20px;">
				<img alt="" class="img-responsive"
					style="height: 100%; width: 100%; border-radius: 5px;"
					src="${pageContext.request.contextPath}${room.roomImages[0]}">
			</div>

			<div>
				<h3>${room.roomName }</h3>
			</div>
			<div>
				<fmt:formatNumber var="roomPrice" value="${room.price }"
					type="currency" minFractionDigits="0" currencySymbol="" />
				<p>Giá: ${roomPrice } VNĐ/ 1 ngày</p>
			</div>
			<div>
				<p>${room.roomDesc }</p>
			</div>
			<div>

				<p>Số ngày ở: <b style="font-size: 20px;">${dateRange }</b> ngày</p>
			</div>
			<div>
				<fmt:formatNumber var="total" value="${dateRange*room.price }"
					type="currency" minFractionDigits="0" currencySymbol="" />
				<p>Tổng tiền (tạm thời): <b style="font-size: 20px;">${total  } VNĐ</b></p>
			</div>

			<div>
				<p><b style="color: gold;">Note:</b> Chưa bao gồm các chi phí dịch vụ phát sinh trong quá trình ở</p>
			</div>

		</div>
	</div>


	<div class="clearfix" style=" margin-bottom: 30px;"></div>

	</div>
	<!-- //top products -->

	<!-- footer -->
	<jsp:include page="footer.jsp"></jsp:include>
	<!-- //footer -->

	<a href="#home" id="toTop" class="scroll" style="display: block;">
		<span id="toTopHover" style="opacity: 1;"> </span>
	</a>
	<!-- js -->
	<script type="text/javascript"
		src="${pageContext.request.contextPath}/view/web/js/jquery-2.1.4.min.js"></script>
	<!-- //js -->

	<!-- CKEDITOR -->
	<script>
		CKEDITOR.replace('message');
	</script>

	<!-- /nav -->
	<script
		src="${pageContext.request.contextPath}/view/web/js/modernizr-2.6.2.min.js"></script>
	<script src="${pageContext.request.contextPath}/view/web/js/classie.js"></script>
	<script src="${pageContext.request.contextPath}/view/web/js/demo1.js"></script>
	<!-- //nav -->
	<!-- single -->
	<script
		src="${pageContext.request.contextPath}/view/web/js/imagezoom.js"></script>
	<!-- single -->
	<!-- script for responsive tabs -->
	<script
		src="${pageContext.request.contextPath}/view/web/js/easy-responsive-tabs.js"></script>
	<script>
		$(document).ready(function() {
			$('#horizontalTab').easyResponsiveTabs({
				type : 'default', //Types: default, vertical, accordion           
				width : 'auto', //auto or any width like 600px
				fit : true, // 100% fit in a container
				closed : 'accordion', // Start closed if in accordion view
				activate : function(event) { // Callback function if tab is switched
					var $tab = $(this);
					var $info = $('#tabInfo');
					var $name = $('span', $info);
					$name.text($tab.text());
					$info.show();
				}
			});
			$('#verticalTab').easyResponsiveTabs({
				type : 'vertical',
				width : 'auto',
				fit : true
			});
		});
	</script>

	<!-- FlexSlider -->
	<script
		src="${pageContext.request.contextPath}/view/web/js/jquery.flexslider.js"></script>
	<script>
		// Can also be used with $(document).ready()
		$(window).load(function() {
			$('.flexslider').flexslider({
				animation : "slide",
				controlNav : "thumbnails"
			});
		});
	</script>
	<!-- //FlexSlider-->

	<!--search-bar-->
	<script src="${pageContext.request.contextPath}/view/web/js/search.js"></script>
	<!--//search-bar-->
	<!-- start-smoth-scrolling -->
	<script type="text/javascript"
		src="${pageContext.request.contextPath}/view/web/js/move-top.js"></script>
	<script type="text/javascript"
		src="${pageContext.request.contextPath}/view/web/js/easing.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function($) {
			$(".scroll").click(function(event) {
				event.preventDefault();
				$('html,body').animate({
					scrollTop : $(this.hash).offset().top
				}, 1000);
			});
		});
	</script>
	<!-- //end-smoth-scrolling -->
	<script type="text/javascript"
		src="${pageContext.request.contextPath}/view/web/js/bootstrap-3.1.1.min.js"></script>



	<!-- Rating js -->
	<script type="text/javascript"
		src="${pageContext.request.contextPath}/view/web/js/rating.js"></script>

	<!-- Fade -->
	<script>
		$(document).ready(function() {
			$("#flip").click(function() {
				$("#panel").slideToggle("slow");
			});
		});
	</script>
	<script
		src="${pageContext.request.contextPath}/view/house-owner/vendor/jquery-3.2.1.min.js"></script>
<%-- 
	<c:if test="${param.startDate != null }">
		<script>
			let myModal = new bootstrap.Modal(document
					.getElementById('message_session'), {});
			myModal.show();
		</script>
		
	</c:if> --%>
	
	<c:if test="${sessionScope.checkout_message != null}">
		<script>
			function myFunction() {
				document.getElementById("showMessage").click();
			}
			myFunction();
		</script>
		
		<%   
  
		HttpSession ss = request.getSession(true);
		ss.setAttribute("checkout_message", null);
  
		%>  
	</c:if>
	

</body>

</html>